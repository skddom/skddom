function nc_netshop_condition_editor(d){this.init(d)}
(function(d){var f=nc_netshop_condition_editor,b=f.prototype,e=nc_netshop_condition_messages,g=f.filesPath=NETCAT_PATH+"modules/netshop/admin/condition_simple/";b.siteId=null;b.root=null;b.mode=null;b.inputField=null;b.isInitializing=!1;b.inputField=null;b.init=function(a){this.loadStylesIn(window);this.siteId=a.site_id;this.root=d(a.container);this.mode=a.mode;"cart_totalprice"==a.mode?(this.createInputField(a),this.showCartSumEditor()):this.showNotification()};b.showNotification=function(){this.root.append('<div class="nc-alert"><i class="nc-icon-l nc--status-info"></i>'+
e.NOTICE+"</div>")};b.loadStylesIn=function(a){0==a.$nc("#nc_condition_editor_stylesheet").length&&a.$nc("head").append('<link rel="stylesheet" id="nc_condition_editor_stylesheet" type="text/css" href="'+g+'css/editor.css">')};b.createInputField=function(a){this.inputField=d("<input type='hidden' name='"+a.input_name+"'/>").appendTo(this.root);(a=a.conditions)&&!d.isEmptyObject(a)&&this.inputField.val(JSON.stringify(a))};b.showCartSumEditor=function(){var a="",b="",c=this.inputField.val()||"{}";if((c=
JSON&&JSON.parse?JSON.parse(c):eval("("+c+")"))&&"and"==c.type&&d.isArray(c.conditions)){c=c.conditions;if(c[0]&&"cart_totalprice"==c[0].type&&"ge"==c[0].op)a=c[0].value;if(c[1]&&"cart_totalprice"==c[1].type&&"le"==c[1].op)b=c[1].value}a="<div class='condition'><span class='condition-string'>"+e.CART_TOTALPRICE_FROM+"</span><span class='condition-param'><input class='condition-param-value' type='number' name='cart_totalprice_from' autocomplete='off' value='"+a+"'></span><span class='condition-string'>"+
e.CART_TOTALPRICE_TO+"</span><span class='condition-param'><input class='condition-param-value' type='number' name='cart_totalprice_to' autocomplete='off' value='"+b+"'></span></div>";this.root.addClass("nc-netshop-condition-editor nc-netshop-condition-editor-simple").append(a)};b.save=function(){if("cart_totalprice"==this.mode){var a=this.root.find("input[name=cart_totalprice_from]").val(),b=this.root.find("input[name=cart_totalprice_to]").val();if(a||b){var c=[];c[0]={type:"cart_totalprice",op:"ge",
value:a||0};b&&(c[1]={type:"cart_totalprice",op:"le",value:b});a={type:"and",conditions:c};this.inputField.val(JSON.stringify(a));return a}}};b.onFormSubmit=function(){if("cart_totalprice"==this.mode)return this.save(),!0}})($nc);
